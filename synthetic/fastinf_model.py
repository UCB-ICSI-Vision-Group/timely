import subprocess

from common_imports import *
from common_mpi import *
import synthetic.config as config

from synthetic.ngram_model import InferenceModel

class FastinfModel(InferenceModel):
  def __init__(self,dataset,suffix):
    self.fname = config.get_fastinf_res_file(dataset,suffix)
    self.p_c = None # TODO

  def update_with_observations(self, observations):
    # TODO: implement
    None

if __name__=='__main__':
  evidences = ["( ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 1.00 ? ? ? ? ? ? ? ? )",
    "( ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 1.00 ? ? ? 1.00 ? ? ? ? )",
    "( ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 1.00 ? ? ? 1.00 ? ? ? 1.00 )",
    "( ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? 1.00 ? ? ? 1.00 ? ? ? 1.00 ? ? ? 1.00 )"]
  cmd = "/Users/sergeyk/research/timely/build/bin/infer_timely -i /Users/sergeyk/research/timely/data/results/fastinf/full_pascal_trainval/perfect/res.txt -m 0 -Is 0 -Ims 0.1"
  p = subprocess.Popen('', shell=True,
                        stdin=subprocess.PIPE, stdout=subprocess.PIPE,stderr=subprocess.PIPE)
  print p.communicate()[0]